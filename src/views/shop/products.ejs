<%- include('../_includes/head') %>

<%- include('../_includes/main-nav') %>

<header class="bg-white shadow">
    <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        <h1 class="text-3xl font-bold text-gray-900"><%= pageTitle %></h1>
    </div>
</header>
<main>
    <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <div class="px-4 py-6 sm:px-0">
            <% if(products.length) { %>
                <ul class="grid grid-cols-1 gap-y-10 gap-x-6 sm:grid-cols-2 lg:grid-cols-4 xl:gap-x-8">
                    <% products.map(product => { %>
                    <li class="group relative">
                        <%- include('../_includes/product-item', { product: product, isAdmin: false }) %>
                    </li>
                    <% }) %>
                </ul>
                <% if (totalPages > 1) { %>
                    <ul class="my-4 flex">
                        <% if (hasPrevPage) { %>
                            <li class="mx-2">
                                <a href="/shop/?page=<%= prevPage %>">Prev</a>
                            </li>
                        <% } %>
                        <% for (let i = 1; i <= totalPages; i++) { %>
                            <li class="mx-2<% if(i === currentPage) { %> font-bold <% } %>">
                                <a href="/shop/?page=<%= i %>"><%= i %></a>
                            </li>
                        <% } %>
                        <% if (hasNextPage) { %>
                            <li class="mx-2">
                                <a href="/shop/?page=<%= nextPage %>">Next</a>
                            </li>
                        <% } %>
                    </ul>
                <% } %>
                <p class="my-4">Total products: <%=totalItems %></p>
            <% } else { %>
                <p class="mb-4">No products so far</p>
            <% } %>
        </div>
    </div>

</main>

<%- include('../_includes/footer') %>
